(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tarbar/mine/mine"],{"17e9":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},i=[];s.d(t,"a",function(){return a}),s.d(t,"b",function(){return i})},"58b8":function(e,t,s){"use strict";s.r(t);var a=s("8ab1"),i=s.n(a);for(var n in a)"default"!==n&&function(e){s.d(t,e,function(){return a[e]})}(n);t["default"]=i.a},"8ab1":function(e,t,s){"use strict";(function(e,s){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={data:function(){return{userinfo:{loginStatus:!1,userName:"",userPhone:"",userLocalImage:"/static/touxiang.png"},recordsData:[],mineArr:[],hasMsg:!1,msgImg:"/static/xiaoxi.png",hasMessage:null}},methods:{isOpen:function(){var e;return e=plus.sqlite.isOpenDatabase({name:"98TV",path:"_doc/test.db"}),!!e},recordsSql:function(){var t=this;this.isOpen()||plus.sqlite.openDatabase({name:"98TV",path:"_doc/test.db",success:function(t){console.log(e("openDatabase success!"," at pages\\tarbar\\mine\\mine.vue:131"))},fail:function(t){console.log(e("openDatabase failed: "+JSON.stringify(t)," at pages\\tarbar\\mine\\mine.vue:134"))}}),plus.sqlite.selectSql({name:"98TV",sql:"select * from history",success:function(s){console.log(e("selectSql success: history"," at pages\\tarbar\\mine\\mine.vue:142")),t.recordsData=[],s.length>0&&(t.recordsData=s,t.recordsData.length>10&&(t.recordsData=t.recordsData.slice(0,10))),t.isOpen()&&plus.sqlite.closeDatabase({name:"98TV",success:function(t){console.log(e("closeDatabase success!"," at pages\\tarbar\\mine\\mine.vue:154"))},fail:function(t){console.log(e("closeDatabase failed: "+JSON.stringify(t)," at pages\\tarbar\\mine\\mine.vue:157"))}})},fail:function(s){console.log(e("selectSql failed: "+JSON.stringify(s)," at pages\\tarbar\\mine\\mine.vue:163")),t.isOpen()&&plus.sqlite.closeDatabase({name:"98TV",success:function(t){console.log(e("closeDatabase success!"," at pages\\tarbar\\mine\\mine.vue:168"))},fail:function(t){console.log(e("closeDatabase failed: "+JSON.stringify(t)," at pages\\tarbar\\mine\\mine.vue:171"))}})}})},recordsLogin:function(){var e=this,t=this.$store.state.userInfo.userId,a=this.$store.state.userInfo.loginToken;s.request({url:this.websiteUrl+"/user/get/visit",method:"GET",header:{Authorization:a},data:{userId:t},success:function(t){if(1001==t.data.status)return s.showToast({title:t.data.message,icon:"none",mask:!0}),void setTimeout(function(){s.hideToast(),s.navigateTo({url:"/pages/login/login",animationType:"slide-in-bottom"})},800);if(t.data.length>0){e.mineArr=t.data;for(var a=0;a<e.mineArr.length;a++)for(var i=0;i<e.recordsData.length;i++)e.recordsData[i].vodId==e.mineArr[a].vodId&&e.recordsData.splice(i,1);e.recordsData=e.recordsData.concat(e.mineArr),e.recordsData.length>10&&(e.recordsData=e.recordsData.slice(0,10))}},fail:function(){},complete:function(){}})},downImg:function(){var e=this.$store.state.userImage,t=e.networkImage;s.downloadFile({url:t,success:function(t){var a=t.tempFilePath;s.saveFile({tempFilePath:a,success:function(t){var a=t.savedFilePath;e.localImage=a,that.$store.commit("storeImage",e),that.user.userUrl=a,s.showToast({title:"上传成功",mask:!0}),setTimeout(function(){s.hideToast()},2e3)}})}})},toLogin:function(){this.userinfo.loginStatus?s.navigateTo({url:"/pages/editProfile/editProfile",animationType:"slide-in-right"}):s.navigateTo({url:"/pages/login/login",animationType:"slide-in-bottom"})},gotoMyInvitation:function(){s.navigateTo({url:"../../../pages/task/my_invitation"})},gotoMyExchange:function(){s.navigateTo({url:"../../../pages/task/my_exchange"})},gotoMyCoinList:function(){s.navigateTo({url:"../../../pages/task/my_coin"})},gotoMyTask:function(){s.switchTab({url:"../../../pages/tarbar/task/task"})},toDown:function(){console.log(e(0x7877874945eeb80000," at pages\\tarbar\\mine\\mine.vue:286"));var t=plus.os.name.toUpperCase();if(console.log(e(t," at pages\\tarbar\\mine\\mine.vue:289")),"ANDROID"===t)s.navigateTo({url:"/pages/download/download",animationType:"slide-in-right"});else if("IOS"===t){var a=plus.ios.newObject("downloadViewController"),i=plus.ios.importClass("UIApplication"),n=i.sharedApplication(),o=plus.ios.invoke(n,"delegate"),r=plus.ios.invoke(o,"window"),u=plus.ios.invoke(r,"rootViewController");plus.ios.invoke(u,"pushViewController:animated:",a,"YES")}},toCollection:function(){this.userinfo.loginStatus?s.navigateTo({url:"/pages/collection/collection",animationDuration:"slide-in-right"}):s.navigateTo({url:"/pages/login/login",animationType:"slide-in-bottom"})},toHelp:function(){s.navigateTo({url:"/pages/helpCenter/helpCenter",animationDuration:"slide-in-right"})},toSetting:function(){s.navigateTo({url:"/pages/setting/setting",animationDuration:"slide-in-right"})},toHistory:function(){s.navigateTo({url:"/pages/playHistory/playHistory",animationDuration:"slide-in-right"})},toMessage:function(){clearInterval(this.hasMessage),s.navigateTo({url:"/pages/systemMsg/systemMsg",animationDuration:"slide-in-right"})},logout:function(){var e=this;this.userinfo.loginStatus&&s.showModal({title:"确认退出？",content:"温馨提示：退出后会影响某些功能使用，确认退出？",showCancel:!0,cancelText:"取消",confirmText:"确定",success:function(t){t.confirm&&s.request({url:e.websiteUrl+"/api/logout",method:"POST",data:{userId:e.$store.state.userInfo.userId},success:function(t){0===t.data.status&&(s.showToast({title:"退出成功",mask:!0}),setTimeout(function(){s.hideToast()},2e3),e.$store.commit("logout"),e.$set(e.userinfo,"loginStatus",e.$store.state.isLogin),e.$set(e.userinfo,"userName",e.$store.state.userInfo.userName),e.$set(e.userinfo,"userPhone",e.$store.state.userInfo.userPhone),e.$set(e.userinfo,"userLocalImage","/static/touxiang.png"),e.recordsSql())},fail:function(){},complete:function(){}})}})},toMovie:function(e){var t=e.currentTarget.id;s.navigateTo({url:"/pages/playPage/playPage?vodId="+t,animationType:"slide-in-right"})}},onShow:function(){var e=this;this.$set(this.userinfo,"loginStatus",this.$store.state.isLogin),this.$set(this.userinfo,"userName",this.$store.state.userInfo.userName),this.$set(this.userinfo,"userPhone",this.$store.state.userInfo.userPhone),this.userinfo.loginStatus?this.$set(this.userinfo,"userLocalImage",this.$store.state.userImage.localImage):this.$set(this.userinfo,"userLocalImage","/static/touxiang.png"),this.recordsSql(),this.userinfo.loginStatus&&this.recordsLogin(),s.request({url:this.websiteUrl+"/api/sysmsg/list",method:"GET",data:{deviceId:this.$store.state.deviceId},success:function(t){t.data.count>0?(clearInterval(e.hasMessage),e.hasMessage=setInterval(function(){e.hasMsg?(e.hasMsg=!1,e.msgImg=""):(e.hasMsg=!0,e.msgImg="/static/xiaoxi.png")},500)):e.msgImg="/static/xiaoxi.png"},fail:function(){},complete:function(){}})}};t.default=a}).call(this,s("0de9")["default"],s("6e42")["default"])},"987d":function(e,t,s){},a861:function(e,t,s){"use strict";s.r(t);var a=s("17e9"),i=s("58b8");for(var n in i)"default"!==n&&function(e){s.d(t,e,function(){return i[e]})}(n);s("b169");var o=s("2877"),r=Object(o["a"])(i["default"],a["a"],a["b"],!1,null,null,null);t["default"]=r.exports},b169:function(e,t,s){"use strict";var a=s("987d"),i=s.n(a);i.a},e840:function(e,t,s){"use strict";(function(e){s("eee4"),s("921b");a(s("66fd"));var t=a(s("a861"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,s("6e42")["createPage"])}},[["e840","common/runtime","common/vendor"]]]);